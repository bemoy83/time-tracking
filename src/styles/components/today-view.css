/* ============================================================
   Today View Page
   ============================================================ */

.today-view {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

/* Loading & Error States */
.today-view__loading,
.today-view__error {
  padding: var(--space-xl);
  text-align: center;
  color: var(--color-text-muted);
}

.today-view__error {
  color: var(--color-recording);
}

/* Quick Add */
.today-view__quick-add {
  display: flex;
  gap: var(--space-sm);
}

.today-view__quick-add .input {
  flex: 1;
}

/* Sections */
.today-view__section {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.today-view__section-title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin: 0;
}

.today-view__project-badge {
  display: inline-block;
  padding: var(--space-xs) var(--space-sm);
  background: var(--color-primary);
  color: white;
  border-radius: var(--radius-xl);
  font-size: var(--font-small);
  text-transform: none;
  letter-spacing: normal;
}

/* ---- Grouped task list: flat look like expandable-section ---- */

.today-view__task-list {
  display: flex;
  flex-direction: column;
  background: var(--color-surface-subtle);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

/* No outer border — only horizontal divider between rows */
.today-view__task-list > .swipeable-row {
  border: none;
  border-radius: 0;
  border-top: 1px solid var(--color-border);
}

.today-view__task-list > .swipeable-row:first-child {
  border-top: none;
}

/* ---- Subtask drawer ---- */

.today-view__subtasks {
  background: var(--color-surface-subtle);
  overflow: hidden;
}

/* Swipeable-rows inside drawer — first connects to parent (no top radius) */
.today-view__subtasks .swipeable-row {
  border: none;
  border-top: 1px solid var(--color-border);
  background: transparent;
  border-radius: 0;
}

/* First of multiple: no rounded corners */
.today-view__subtasks .swipeable-row:first-child:not(:last-child) {
  border-radius: 0;
}

/* Single subtask (first and last): bottom rounded only */
.today-view__subtasks .swipeable-row:first-child:last-child {
  border-bottom-left-radius: var(--radius-xl);
  border-bottom-right-radius: var(--radius-xl);
}

/* Last of multiple: bottom rounded only */
.today-view__subtasks .swipeable-row:last-child:not(:first-child) {
  border-bottom-left-radius: var(--radius-xl);
  border-bottom-right-radius: var(--radius-xl);
}

/* Card after a drawer: divider only (no special rounding) */
.today-view__task-list > .today-view__subtasks + .swipeable-row {
  border-top: 1px solid var(--color-border);
}

/* Blocked Tasks — flat rows inside grouped container */
.today-view__blocked-task {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: var(--space-sm) var(--space-md);
  background: #fffbeb;
  border: none;
  border-bottom: 1px solid var(--color-border);
  cursor: pointer;
  min-height: var(--touch-min);
  justify-content: center;
}

.today-view__blocked-task:last-child {
  border-bottom: none;
}

.today-view__blocked-task-title {
  font-weight: 500;
}

.today-view__blocked-reason {
  font-size: var(--font-small);
  color: #b45309;
}

/* Empty State */
.today-view__empty {
  padding: var(--space-xl);
  text-align: center;
  color: var(--color-text-muted);
}

.today-view__icon {
  width: 20px;
  height: 20px;
}
